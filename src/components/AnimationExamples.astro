---
// Example component demonstrating GSAP and Motion One animations
---

<section class="animation-examples-section">
  <div class="container">
    <h2 class="section-title">Animation Examples</h2>
    <p class="section-subtitle">Demonstrating smooth animations with GSAP and Motion One</p>

    <div class="examples-grid">
      <!-- GSAP Example: Card Animation -->
      <div class="example-card gsap-example">
        <h3>GSAP Card Animation</h3>
        <div class="animated-box gsap-box"></div>
        <button class="animate-btn" data-gsap-trigger>Animate with GSAP</button>
      </div>

      <!-- Motion One Example: Fade In -->
      <div class="example-card motion-example">
        <h3>Motion One Fade</h3>
        <div class="animated-box motion-box"></div>
        <button class="animate-btn" data-motion-trigger>Animate with Motion</button>
      </div>

      <!-- Stagger Animation Example -->
      <div class="example-card stagger-example">
        <h3>Stagger Animation</h3>
        <div class="stagger-container">
          <div class="stagger-item"></div>
          <div class="stagger-item"></div>
          <div class="stagger-item"></div>
          <div class="stagger-item"></div>
        </div>
        <button class="animate-btn" data-stagger-trigger>Stagger Animation</button>
      </div>
    </div>
  </div>
</section>

<style>
  .animation-examples-section {
    padding: 4rem 0;
    background: #f9fafb;
  }

  .section-title {
    text-align: center;
    font-size: 2.5rem;
    font-weight: 700;
    margin-bottom: 1rem;
    color: #1d1d1d;
  }

  .section-subtitle {
    text-align: center;
    font-size: 1.125rem;
    color: #666;
    margin-bottom: 3rem;
  }

  .examples-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
    max-width: 1200px;
    margin: 0 auto;
  }

  .example-card {
    background: white;
    padding: 2rem;
    border-radius: 12px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    text-align: center;
  }

  .example-card h3 {
    font-size: 1.5rem;
    font-weight: 600;
    margin-bottom: 1.5rem;
    color: #1d1d1d;
  }

  .animated-box {
    width: 120px;
    height: 120px;
    margin: 0 auto 1.5rem;
    border-radius: 8px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  }

  .gsap-box {
    background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
  }

  .motion-box {
    background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
  }

  .stagger-container {
    display: flex;
    gap: 0.5rem;
    justify-content: center;
    margin-bottom: 1.5rem;
    flex-wrap: wrap;
  }

  .stagger-item {
    width: 60px;
    height: 60px;
    border-radius: 8px;
    background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
    opacity: 0;
    transform: translateY(20px);
  }

  .animate-btn {
    padding: 0.75rem 1.5rem;
    background: #1a2847;
    color: white;
    border: none;
    border-radius: 6px;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: background 0.2s ease;
  }

  .animate-btn:hover {
    background: #2d3f6b;
  }

  .animate-btn:active {
    transform: scale(0.98);
  }

  @media (max-width: 768px) {
    .examples-grid {
      grid-template-columns: 1fr;
    }
  }
</style>

<script>
  import { gsap } from 'gsap';
  import { gsap } from 'gsap';

  function initAnimationExamples() {
    if (typeof window === 'undefined') return;

    // GSAP Example
    const gsapTrigger = document.querySelector('[data-gsap-trigger]');
    const gsapBox = document.querySelector('.gsap-box');

    if (gsapTrigger && gsapBox) {
      gsapTrigger.addEventListener('click', () => {
        gsap.to(gsapBox, {
          duration: 0.8,
          scale: 1.2,
          rotation: 360,
          borderRadius: '50%',
          ease: 'back.out(1.7)',
          onComplete: () => {
            gsap.to(gsapBox, {
              duration: 0.5,
              scale: 1,
              rotation: 0,
              borderRadius: '8px',
              ease: 'power2.out'
            });
          }
        });
      });
    }

    // Motion One Example (using GSAP)
    const motionTrigger = document.querySelector('[data-motion-trigger]');
    const motionBox = document.querySelector('.motion-box');

    if (motionTrigger && motionBox) {
      motionTrigger.addEventListener('click', () => {
        gsap.to(motionBox, {
          opacity: 0.3,
          scale: 1.3,
          borderRadius: '50%',
          duration: 0.5,
          ease: 'power2.inOut',
          yoyo: true,
          repeat: 1
        });
      });
    }

    // Stagger Animation Example
    const staggerTrigger = document.querySelector('[data-stagger-trigger]');
    const staggerItems = document.querySelectorAll('.stagger-item');

    if (staggerTrigger && staggerItems.length > 0) {
      let isAnimated = false;

      staggerTrigger.addEventListener('click', () => {
        if (isAnimated) {
          // Reset
          gsap.to(staggerItems, {
            opacity: 0,
            y: 20,
            duration: 0.3,
            stagger: 0.1,
            onComplete: () => {
              isAnimated = false;
            }
          });
        } else {
          // Animate in with stagger
          gsap.to(staggerItems, {
            opacity: 1,
            y: 0,
            scale: 1,
            duration: 0.5,
            stagger: 0.1,
            ease: 'back.out(1.7)',
            onComplete: () => {
              isAnimated = true;
            }
          });
        }
      });
    }
  }

  // Initialize on load
  if (typeof window !== 'undefined') {
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initAnimationExamples);
    } else {
      initAnimationExamples();
    }

    // Re-initialize on page navigation
    document.addEventListener('astro:page-load', () => {
      setTimeout(initAnimationExamples, 50);
    });
  }
</script>
