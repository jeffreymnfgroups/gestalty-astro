---
import { markdownify } from "@/lib/utils/textConverter";
import type { CollectionEntry } from "astro:content";
import { getEntry } from "astro:content";

const { title, subtitle, questions, discovery_title, discovery_content } = (
  (await getEntry(
    "theQuestionSection",
    "the-question"
  )) as CollectionEntry<"theQuestionSection">
).data;
---

<section class="section bg-light py-10 lg:py-16 overflow-hidden relative z-10">
  <div class="container relative z-10">
    <div class="row g-6 lg:g-10 items-center">
      <!-- Left Column: Content -->
      <div class="lg:col-6 flex flex-col justify-center">
        <!-- {subtitle && (
          <p
            class="mb-2 font-medium text-tertiary text-sm uppercase tracking-wider"
            set:html={markdownify(subtitle)}
            data-aos="fade-up-sm"
          />
        )} -->
        
        {title && (
          <h2 
            class="mb-6 text-2xl md:text-3xl lg:text-4xl font-semibold tracking-tight leading-tight" 
            set:html={markdownify(title)}
            data-aos="fade-up-sm"
            data-aos-delay="100"
          />
        )}

        <div class="space-y-4 mb-6">
          {
            questions?.map((question, index) => (
              <div
                class="rounded-xl bg-white p-5 md:p-6 shadow-md hover:shadow-lg border border-border/50 transition-all duration-300 hover:-translate-y-1"
                data-aos="fade-up-sm"
                data-aos-delay={200 + index * 100}>
                <h3 class="text-lg md:text-xl font-medium mb-0 text-text-dark leading-snug" set:html={markdownify(question)} />
              </div>
            ))
          }
        </div>

        <p class="text-text mb-4 text-base leading-relaxed" data-aos="fade-up-sm" data-aos-delay="400">
          These questions became our mission.
        </p>

        {discovery_title && discovery_content && (
          <div class="mt-6 pt-6 border-t border-border/50" data-aos="fade-up-sm" data-aos-delay="500">
            <p class="mb-3 font-medium text-tertiary text-sm uppercase tracking-wider" set:html={markdownify(discovery_title)} />
            <h3 class="text-xl font-medium text-text-dark italic" set:html={markdownify(discovery_content)} />
          </div>
        )}

        <p class="text-text mt-6 text-base leading-relaxed" data-aos="fade-up-sm" data-aos-delay="600">
          We didn't just set out to create another study method. We set out to redesign the learner's journey from the ground upâ€”from identifying a foundational crisis in exam preparation to crafting a robust, neuroscience-backed system.
        </p>
      </div>

      <!-- Right Column: Image -->
      <div class="lg:col-6 flex flex-col justify-center">
        <div class="w-full relative mx-auto" data-aos="fade-up-sm" data-aos-delay="300">
          <img 
            src="/images/banner-hero.png" 
            alt="Gestalty Mission" 
            class="w-full h-auto rounded-xl object-cover transition-transform duration-300 hover:scale-105"
          />
        </div>
      </div>
    </div>
  </div>
</section>


